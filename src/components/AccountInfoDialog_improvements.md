# AccountInfoDialog 改进说明

## 更新日期: 2025-11-20

## 基于 GetCurrentUser API 的增强

### 1. 用户基本信息增强
- ✅ **可复制字段**：用户ID、邮箱、Firebase UID 等重要字段现在支持点击复制
- ✅ **时间戳显示**：
  - 注册时间 (signup_time)
  - 最后更新时间 (last_update_time)
  - 试用结束时间 (trial_end_time)
- ✅ **推荐码**：显示用户的推荐码（如果有）

### 2. 团队信息板块（新增）
独立的团队信息展示区域，包含：
- 团队 ID（可复制）
- 团队名称
- 席位数量和用户数量对比
- 当前计费周期开始和结束时间

### 3. 订阅信息优化
- **状态标签组**：同时显示多个状态（活跃、试用期）
- **Stripe ID**：支持复制 Stripe 订阅ID和客户ID
- **席位统计**：使用 el-statistic 组件更直观显示

### 4. 套餐详情卡片（重新设计）
使用卡片布局展示完整的套餐信息：

#### 基础配置
- 团队席位数
- 带宽限制（格式化显示）
- 缓存限制（格式化显示）
- 存储配额（自动转换 MB/GB）
- API 限制（识别无限制）
- 超时时间

#### 积分信息（新增）
如果套餐包含积分信息，显示：
- Flex 积分（可用/已用）
- Prompt 积分（可用/已用）
- Flow 积分（可用/已用）

### 5. 角色与权限（增强）
- **角色显示**：
  - Root Admin 特殊标识
  - 显示角色名称和角色ID
  - 图标增强识别
- **权限位图**（新增）：
  - 解析权限字节数组
  - 以标签形式显示各项权限
  - 绿色表示已启用，灰色表示未启用

### 6. 格式化函数

#### formatDateTime
- 将 Unix 时间戳转换为可读日期时间

#### formatStorage
- 智能转换存储单位（MB → GB）

#### formatAPILimit
- 识别 uint64 最大值为"无限制"
- 大数字自动转换为 K/M 格式

#### formatPlanName
- 套餐名称本地化（Enterprise → Enterprise 企业版）

#### decodePermissions
- 解析权限位图为可读权限列表

### 7. UI/UX 改进

#### 视觉优化
- 嵌套描述列表更好的层次感
- 卡片渐变背景
- 统计数字突出显示
- 可复制文本的视觉提示

#### 交互优化
- 重要字段支持一键复制
- 空状态提供重新加载按钮
- 原始数据可折叠查看

### 8. 数据完整性

现在完整支持 GetCurrentUser API 返回的所有重要字段：
- User 对象的所有字段
- Team 对象的完整信息
- PlanInfo 的详细配置
- UserRole 的角色信息
- Permissions 权限位图
- UserSettings（如果需要可以继续扩展）

## 使用效果

账号信息对话框现在能够：
1. 展示更全面的用户和团队信息
2. 清晰显示套餐配置和限制
3. 直观呈现权限和角色
4. 方便复制重要标识符
5. 提供更好的视觉层次和用户体验

## 后续可能的改进

1. 添加权限说明的 tooltip
2. 积分使用趋势图表
3. 历史记录查看
4. 导出用户信息功能
